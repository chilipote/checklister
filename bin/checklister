#!/usr/bin/env ruby
require "gli"
require "checklister"

include GLI::App

program_desc "gives you the power to transform any markdown file or url checklist into an actionable gitlab and github issue."

version Checklister::VERSION

# Flags
flag :gitlab_host, desc: "Set the gitlab host"
flag :gitlab_token, desc: "Set the gitlab token"

pre do |global_options,command,options,args|
  Checklister.configure(global_options)
end

desc "Show current configuration settings"
command :settings do |c|
  c.action do |global_options,options,args|
    puts "---------------------"
    Checklister.config.to_stdout
    puts "---------------------"
  end
end

desc "Describe setup here"
arg_name "Describe arguments to setup here"
command :setup do |c|
  c.desc "Describe a switch to setup"
  c.switch :s

  c.desc "Describe a flag to setup"
  c.default_value "default"
  c.flag :f
  c.action do |global_options,options,args|

    # Your command logic here

    # If you have any errors, just raise them
    # raise "that command made no sense"

    puts "setup command ran"
  end
end

desc "Describe create here"
arg_name "Describe arguments to create here"
command :create do |c|
  c.action do |global_options,options,args|
    puts "create command ran"
  end
end

on_error do |exception|
  # Error logic here
  # return false to skip default error handling
  true
end

exit run(ARGV)
